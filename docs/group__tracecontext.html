<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dynatrace OneAgent SDK for C/C++: W3C Trace Context</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Dynatrace OneAgent SDK for C/C++
   &#160;<span id="projectnumber">1.7.1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">W3C Trace Context</div>  </div>
</div><!--header-->
<div class="contents">

<p>Retrieve the current W3C Trace Context (trace + span ID).  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga6f1683703917fc4cc90df893b7df50ed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="onesdk__config_8h.html#a76d5518cc30fddd2df8ca8d313fb79dc">onesdk_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tracecontext.html#ga6f1683703917fc4cc90df893b7df50ed">onesdk_tracecontext_get_current</a> (char *trace_id_buffer, <a class="el" href="onesdk__config_8h.html#ad0101f09e406e39453ed7f0a4982ef32">onesdk_size_t</a> trace_id_buffer_size, char *span_id_buffer, <a class="el" href="onesdk__config_8h.html#ad0101f09e406e39453ed7f0a4982ef32">onesdk_size_t</a> span_id_buffer_size)</td></tr>
<tr class="memdesc:ga6f1683703917fc4cc90df893b7df50ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the current W3C trace context's span and trace ID.  <a href="#ga6f1683703917fc4cc90df893b7df50ed">More...</a><br /></td></tr>
<tr class="separator:ga6f1683703917fc4cc90df893b7df50ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga214c80b20c7e5e6a244ec84e161b5c78"><td class="memItemLeft" align="right" valign="top"><a id="ga214c80b20c7e5e6a244ec84e161b5c78"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tracecontext.html#ga214c80b20c7e5e6a244ec84e161b5c78">ONESDK_TRACE_ID_BUFFER_SIZE</a>&#160;&#160;&#160;33</td></tr>
<tr class="memdesc:ga214c80b20c7e5e6a244ec84e161b5c78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Required size for trace ID buffer (including null termiator). <br /></td></tr>
<tr class="separator:ga214c80b20c7e5e6a244ec84e161b5c78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaff7f6891ad50d6291f575cf0bcee4644"><td class="memItemLeft" align="right" valign="top"><a id="gaff7f6891ad50d6291f575cf0bcee4644"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tracecontext.html#gaff7f6891ad50d6291f575cf0bcee4644">ONESDK_SPAN_ID_BUFFER_SIZE</a>&#160;&#160;&#160;17</td></tr>
<tr class="memdesc:gaff7f6891ad50d6291f575cf0bcee4644"><td class="mdescLeft">&#160;</td><td class="mdescRight">Required size for span ID buffer (including null termiator). <br /></td></tr>
<tr class="separator:gaff7f6891ad50d6291f575cf0bcee4644"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Retrieve the current W3C Trace Context (trace + span ID). </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga6f1683703917fc4cc90df893b7df50ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6f1683703917fc4cc90df893b7df50ed">&#9670;&nbsp;</a></span>onesdk_tracecontext_get_current()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="onesdk__config_8h.html#a76d5518cc30fddd2df8ca8d313fb79dc">onesdk_result_t</a> onesdk_tracecontext_get_current </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>trace_id_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="onesdk__config_8h.html#ad0101f09e406e39453ed7f0a4982ef32">onesdk_size_t</a>&#160;</td>
          <td class="paramname"><em>trace_id_buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>span_id_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="onesdk__config_8h.html#ad0101f09e406e39453ed7f0a4982ef32">onesdk_size_t</a>&#160;</td>
          <td class="paramname"><em>span_id_buffer_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves the current W3C trace context's span and trace ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">trace_id_buffer</td><td>[optional] Pointer to a buffer into which the W3C trace ID string shall be copied. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">trace_id_buffer_size</td><td>Size of the buffer pointed to by <code>buffer</code> in bytes. Must be zero if <code>buffer</code> is <code>NULL</code>. Otherwise, exactly <a class="el" href="group__tracecontext.html#ga214c80b20c7e5e6a244ec84e161b5c78">ONESDK_TRACE_ID_BUFFER_SIZE</a> bytes are required. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">span_id_buffer</td><td>[optional] Pointer to a buffer into which the W3C trace ID string shall be copied. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">span_id_buffer_size</td><td>Size of the buffer pointed to by <code>buffer</code> in bytes. Must be zero if <code>buffer</code> is <code>NULL</code>. Otherwise, exactly <a class="el" href="group__tracecontext.html#gaff7f6891ad50d6291f575cf0bcee4644">ONESDK_SPAN_ID_BUFFER_SIZE</a> bytes are required.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="onesdk__common_8h.html#af3f7d04ad8caca4f729971defbfdf555">ONESDK_SUCCESS</a> or <a class="el" href="onesdk__common_8h.html#a5d9056687acfbfe74c6e15b78d2690a5">ONESDK_ERROR_NO_DATA</a> if successful, another SDK stub error code otherwise.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This function is only meant for use cases like log enrichment (<a href="https://www.dynatrace.com/support/help/shortlink/log-monitoring-log-enrichment">https://www.dynatrace.com/support/help/shortlink/log-monitoring-log-enrichment</a>) This function cannot be used to create traceparent headers for linking or similar purposes. For these purposes, use <a class="el" href="group__tracers.html#gad1a200fc7591163158458bb9938f4b29">onesdk_tracer_get_outgoing_dynatrace_string_tag</a> or <a class="el" href="group__tracers.html#ga7ae547cfdab36ab9464f82708fe9d414">onesdk_tracer_get_outgoing_dynatrace_byte_tag</a>.</dd></dl>
<p>If a buffer pointer is not <code>NULL</code> and the respective buffer size big enough, this function will copy the string representation into the provided buffer. Providing a larger buffer than required is allowed but useless. Use the null-terminator to determine the length of the received string then.</p>
<p>This function will always make sure that, if the application provides a non-<code>NULL</code> buffer with a buffer_size &gt;= 1, <code>buffer</code> will always be null-terminated. I.e. if the string representation cannot be stored because <code>buffer_size</code> is too small, a null character will be written into <code>buffer</code>[0].</p>
<p>The strings copied into the buffers use ASCII encoding and will conform to the W3C trace ID specification (i.e., consist only of lowercase hex characters), see <a href="https://www.w3.org/TR/trace-context-1/#traceparent-header-field-values">https://www.w3.org/TR/trace-context-1/#traceparent-header-field-values</a>.</p>
<p>If there is no data available (return value <a class="el" href="onesdk__common_8h.html#a5d9056687acfbfe74c6e15b78d2690a5">ONESDK_ERROR_NO_DATA</a>) or an error occurs (any other return value other than <a class="el" href="onesdk__common_8h.html#af3f7d04ad8caca4f729971defbfdf555">ONESDK_SUCCESS</a>) all provided buffers will contain the "invalid" trace and span IDs, i.e. an ID with the usual length consisting only with ASCII digit zero (followed, as always, by a null-terminator). The only exception is, naturally, if the provided buffers are too small. In these cases, only a null-terminator (i.e., empty string) will be written (provided the buffer size allows that).</p>
<p>This means that you usually don't need to check the return value of the function, since the usual logging callback mechanism can still be used if diagnostics information is needed. However, if you want to know if you got a valid trace context, checking whether the function returns <a class="el" href="onesdk__common_8h.html#af3f7d04ad8caca4f729971defbfdf555">ONESDK_SUCCESS</a> is faster than manually checking the IDs for zeroes. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
